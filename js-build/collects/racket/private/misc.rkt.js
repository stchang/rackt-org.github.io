import * as $rjs_core from '../../../runtime/core.js';import * as M0 from "../../../runtime/main.rkt.js";import * as M1 from "../../../runtime/kernel.rkt.js";import * as M2 from "./path.rkt.js";var check58 = function(x61) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M1.real_p(x61)!==false) {var if_res8 = M1.rvoid();} else {var if_res8 = M1.raise_argument_error($rjs_core.Symbol.make("rationalize"),$rjs_core.UString.make("real?"),x61);}return if_res8;};var find_between59 = function(lo62, hi63) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M1.integer_p(lo62)!==false) {var if_res10 = lo62;} else {var lo_int64 = M1.floor(lo62);var hi_int65 = M1.floor(hi63);if (M1.__lt_(lo_int64,hi_int65)!==false) {var if_res9 = M1.add1(lo_int64);} else {var if_res9 = lo_int64+(1/find_between59(1/(hi63-lo_int64),1/(lo62-lo_int64)));}var if_res10 = if_res9;}return if_res10;};var do_find_between60 = function(lo66, hi67) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M1.negative_p(lo66)!==false) {var if_res11 = M1.__(find_between59(M1.__(hi67),M1.__(lo66)));} else {var if_res11 = find_between59(lo66,hi67);}return if_res11;};var rationalize = function(x68, within69) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}check58(x68);check58(within69);var delta70 = M1.abs(within69);var lo71 = x68-delta70;var hi72 = x68+delta70;if (M1.not(M1.__eq_(x68,x68))!==false) {var if_res21 = x68;} else {var or_part73 = M1.equal_p(x68,Infinity);if (or_part73!==false) {var if_res12 = or_part73;} else {var if_res12 = M1.equal_p(x68,-Infinity);}if (if_res12!==false) {if (M1.equal_p(delta70,Infinity)!==false) {var if_res13 = NaN;} else {var if_res13 = x68;}var if_res20 = if_res13;} else {if (M1.equal_p(delta70,Infinity)!==false) {var if_res19 = 0.0;} else {if (M1.not(M1.__eq_(within69,within69))!==false) {var if_res18 = within69;} else {if (M1.__lt__eq_(lo71,0,hi72)!==false) {if (M1.exact_p(x68)!==false) {var if_res14 = 0;} else {var if_res14 = 0.0;}var if_res17 = if_res14;} else {var or_part74 = M1.__rjs_quoted__.inexact_p(lo71);if (or_part74!==false) {var if_res15 = or_part74;} else {var if_res15 = M1.__rjs_quoted__.inexact_p(hi72);}if (if_res15!==false) {var if_res16 = M1.exact__gt_inexact(do_find_between60(M1.inexact__gt_exact(lo71),M1.inexact__gt_exact(hi72)));} else {var if_res16 = do_find_between60(lo71,hi72);}var if_res17 = if_res16;}var if_res18 = if_res17;}var if_res19 = if_res18;}var if_res20 = if_res19;}var if_res21 = if_res20;}return if_res21;};var load_by_cd = function(n75) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M2.path_string_p(n75)!==false) {var if_res22 = M1.rvoid();} else {var if_res22 = M1.raise_argument_error($rjs_core.Symbol.make("load/cd"),$rjs_core.UString.make("path-string?"),n75);}if_res22;var let_result23 = M1.__rjs_quoted__.split_path(n75);var base76 = let_result23.getAt(0);var name77 = let_result23.getAt(1);var dir_p78 = let_result23.getAt(2);if (dir_p78!==false) {var if_res26 = M1.raise(M1.__rjs_quoted__.exn_fail_filesystem(M1.string__gt_immutable_string(M1.format($rjs_core.UString.make("load/cd: cannot open a directory: ~s"),n75)),M1.current_continuation_marks()));} else {if (M1.not(M1.path_p(base76))!==false) {var if_res25 = M0.__rjs_quoted__.load(n75);} else {if (M1.not(M1.__rjs_quoted__.directory_exists_p(base76))!==false) {var if_res24 = M1.raise(M1.__rjs_quoted__.exn_fail_filesystem(M1.string__gt_immutable_string(M1.format($rjs_core.UString.make("load/cd: directory of ~s does not exist (current directory is ~s)"),n75,M1.__rjs_quoted__.current_directory())),M1.current_continuation_marks()));} else {var if_res24 = M1.rvoid();}if_res24;var orig79 = M1.__rjs_quoted__.current_directory();var if_res25 = M1.dynamic_wind(function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M1.__rjs_quoted__.current_directory(base76);},function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.__rjs_quoted__.load(name77);},function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M1.__rjs_quoted__.current_directory(orig79);});}var if_res26 = if_res25;}return if_res26;};var __load = function(load80, name81, path82) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M2.path_string_p(path82)!==false) {var if_res27 = M1.rvoid();} else {var if_res27 = M1.raise_argument_error(name81,$rjs_core.UString.make("path-string?"),path82);}if_res27;if (M1.__rjs_quoted__.complete_path_p(path82)!==false) {var if_res29 = load80(path82);} else {var dir83 = M1.__rjs_quoted__.current_load_relative_directory();if (dir83!==false) {var if_res28 = M1.__rjs_quoted__.path__gt_complete_path(path82,dir83);} else {var if_res28 = path82;}var if_res29 = load80(if_res28);}return if_res29;};var load_relative = function(path84) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return __load(M0.__rjs_quoted__.load,$rjs_core.Symbol.make("load-relative"),path84);};var load_relative_extension = function(path85) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return __load(M0.__rjs_quoted__.load_extension,$rjs_core.Symbol.make("load-relative-extension"),path85);};var let_result30 = M1.make_struct_type($rjs_core.Symbol.make("evt"),false,1,0,false,M1.list(M1.cons(M1.prop_evt,0)),M1.current_inspector(),false,$rjs_core.Pair.makeList(0));var struct_guard = let_result30.getAt(0);var make_guard = let_result30.getAt(1);var guard_p = let_result30.getAt(2);var guard_ref = let_result30.getAt(3);var guard_set_bang_ = let_result30.getAt(4);var guard_evt = function(proc86) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M1.procedure_p(proc86)!==false) {var if_res31 = M1.procedure_arity_includes_p(proc86,0);} else {var if_res31 = false;}if (if_res31!==false) {var if_res32 = M1.rvoid();} else {var if_res32 = M1.raise_argument_error($rjs_core.Symbol.make("guard-evt"),$rjs_core.UString.make("(any/c . -> . evt?)"),proc86);}if_res32;return make_guard(function(self87) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return proc86();});};var channel_get = function(ch88) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M1.__rjs_quoted__.channel_p(ch88)!==false) {var if_res33 = M1.rvoid();} else {var if_res33 = M1.raise_argument_error($rjs_core.Symbol.make("channel-get"),$rjs_core.UString.make("channel?"),ch88);}if_res33;return M1.__rjs_quoted__.sync(ch88);};var channel_try_get = function(ch89) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M1.__rjs_quoted__.channel_p(ch89)!==false) {var if_res34 = M1.rvoid();} else {var if_res34 = M1.raise_argument_error($rjs_core.Symbol.make("channel-try-get"),$rjs_core.UString.make("channel?"),ch89);}if_res34;return M1.__rjs_quoted__.sync_by_timeout(0,ch89);};var channel_put = function(ch90, val91) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M1.__rjs_quoted__.channel_p(ch90)!==false) {var if_res35 = M1.rvoid();} else {var if_res35 = M1.raise_argument_error($rjs_core.Symbol.make("channel-put"),$rjs_core.UString.make("channel?"),ch90);}if_res35;if (M1.__rjs_quoted__.sync(M1.__rjs_quoted__.channel_put_evt(ch90,val91))!==false) {var if_res36 = M1.rvoid();} else {var if_res36 = false;}return if_res36;};var port_p = function(x92) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}var or_part93 = M1.input_port_p(x92);if (or_part93!==false) {var if_res37 = or_part93;} else {var if_res37 = M1.output_port_p(x92);}return if_res37;};var cl38 = function(v94) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return writeln(v94,M1.current_output_port());};var cl39 = function(v95, p96) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M1.output_port_p(p96)!==false) {var if_res41 = M1.rvoid();} else {var if_res41 = M1.raise_argument_error($rjs_core.Symbol.make("writeln"),$rjs_core.UString.make("output-port?"),1,v95,p96);}if_res41;M1.write(v95,p96);return M1.newline(p96);};var writeln = $rjs_core.attachProcedureArity(function() {var fixed_lam40 = {'1':cl38,'2':cl39}[arguments.length];if (fixed_lam40!==undefined) {return fixed_lam40.apply(null,arguments);} else {return M1.error($rjs_core.UString.make("case-lambda: invalid case"));}},[1,2]);var cl42 = function(v97) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return displayln(v97,M1.current_output_port());};var cl43 = function(v98, p99) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M1.output_port_p(p99)!==false) {var if_res45 = M1.rvoid();} else {var if_res45 = M1.raise_argument_error($rjs_core.Symbol.make("displayln"),$rjs_core.UString.make("output-port?"),1,v98,p99);}if_res45;M1.display(v98,p99);return M1.newline(p99);};var displayln = $rjs_core.attachProcedureArity(function() {var fixed_lam44 = {'1':cl42,'2':cl43}[arguments.length];if (fixed_lam44!==undefined) {return fixed_lam44.apply(null,arguments);} else {return M1.error($rjs_core.UString.make("case-lambda: invalid case"));}},[1,2]);var cl46 = function(v100) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return println(v100,M1.current_output_port(),0);};var cl47 = function(v101, p102) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}return println(v101,p102,0);};var cl48 = function(v103, p104, d105) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M1.output_port_p(p104)!==false) {var if_res50 = M1.rvoid();} else {var if_res50 = M1.raise_argument_error($rjs_core.Symbol.make("println"),$rjs_core.UString.make("output-port?"),1,v103,p104,d105);}if_res50;if (M1.number_p(d105)!==false) {var or_part106 = M1.__eq_(0,d105);if (or_part106!==false) {var if_res51 = or_part106;} else {var if_res51 = M1.__eq_(d105,1);}var if_res52 = if_res51;} else {var if_res52 = false;}if (if_res52!==false) {var if_res53 = M1.rvoid();} else {var if_res53 = M1.raise_argument_error($rjs_core.Symbol.make("println"),$rjs_core.UString.make("(or/c 0 1)"),2,v103,p104,d105);}if_res53;M1.print(v103,p104,d105);return M1.newline(p104);};var println = $rjs_core.attachProcedureArity(function() {var fixed_lam49 = {'1':cl46,'2':cl47,'3':cl48}[arguments.length];if (fixed_lam49!==undefined) {return fixed_lam49.apply(null,arguments);} else {return M1.error($rjs_core.UString.make("case-lambda: invalid case"));}},[1,2,3]);var string_no_nuls_p = function(s107) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M1.string_p(s107)!==false) {var if_res54 = M1.not(M1.__rjs_quoted__.regexp_match_p("/\u0000/",s107));} else {var if_res54 = false;}return if_res54;};var bytes_environment_variable_name_p = function(s108) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M1.bytes_p(s108)!==false) {if (M1.eq_p($rjs_core.Symbol.make("windows"),M1.system_type())!==false) {var if_res55 = M1.__rjs_quoted__.regexp_match_p("/^[^\u0000=]+$/",s108);} else {var if_res55 = M1.__rjs_quoted__.regexp_match_p("/^[^\u0000=]*$/",s108);}var if_res56 = if_res55;} else {var if_res56 = false;}return if_res56;};var string_environment_variable_name_p = function(s109) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M1.string_p(s109)!==false) {var if_res57 = bytes_environment_variable_name_p(M1.__rjs_quoted__.string__gt_bytes_by_locale(s109,M1.char__gt_integer($rjs_core.Char.charFromCodepoint(63))));} else {var if_res57 = false;}return if_res57;};var getenv = function(s110) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (string_environment_variable_name_p(s110)!==false) {var if_res58 = M1.rvoid();} else {var if_res58 = M1.raise_argument_error($rjs_core.Symbol.make("getenv"),$rjs_core.UString.make("string-environment-variable-name?"),s110);}if_res58;var v111 = M1.environment_variables_ref(M1.current_environment_variables(),M1.__rjs_quoted__.string__gt_bytes_by_locale(s110,M1.char__gt_integer($rjs_core.Char.charFromCodepoint(63))));if (v111!==false) {var if_res59 = M1.__rjs_quoted__.bytes__gt_string_by_locale(v111,$rjs_core.Char.charFromCodepoint(63));} else {var if_res59 = false;}return if_res59;};var putenv = function(s112, t113) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (string_no_nuls_p(s112)!==false) {var if_res60 = M1.rvoid();} else {var if_res60 = M1.raise_argument_error($rjs_core.Symbol.make("putenv"),$rjs_core.UString.make("string-environment-variable-name?"),0,s112,t113);}if_res60;if (string_no_nuls_p(t113)!==false) {var if_res61 = M1.rvoid();} else {var if_res61 = M1.raise_argument_error($rjs_core.Symbol.make("putenv"),$rjs_core.UString.make("string-no-nuls?"),1,s112,t113);}if_res61;if (M1.environment_variables_set_bang_(M1.current_environment_variables(),M1.__rjs_quoted__.string__gt_bytes_by_locale(s112,M1.char__gt_integer($rjs_core.Char.charFromCodepoint(63))),M1.__rjs_quoted__.string__gt_bytes_by_locale(t113,M1.char__gt_integer($rjs_core.Char.charFromCodepoint(63))),function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return false;})!==false) {var if_res62 = true;} else {var if_res62 = false;}return if_res62;};var __rjs_quoted__ = {};export { __rjs_quoted__,putenv,getenv,string_environment_variable_name_p,bytes_environment_variable_name_p,println,displayln,writeln,port_p,channel_put,channel_try_get,channel_get,guard_evt,load_relative_extension,load_relative,load_by_cd,rationalize };