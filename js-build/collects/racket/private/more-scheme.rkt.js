import * as $rjs_core from '../../../runtime/core.js';import * as M0 from "../../../runtime/kernel.rkt.js";import * as M1 from "../../../runtime/paramz.rkt.js";var current_parameterization = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.continuation_mark_set_first(false,M1.parameterization_key);};var call_with_parameterization = function(paramz3458, thunk3459) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.__rjs_quoted__.parameterization_p(paramz3458)!==false) {var if_res2215 = M0.rvoid();} else {var if_res2215 = M0.raise_argument_error($rjs_core.Symbol.make("call-with-parameterization"),$rjs_core.UString.make("parameterization?"),0,paramz3458,thunk3459);}if_res2215;if (M0.procedure_p(thunk3459)!==false) {var if_res2216 = M0.procedure_arity_includes_p(thunk3459,0);} else {var if_res2216 = false;}if (if_res2216!==false) {var if_res2217 = M0.rvoid();} else {var if_res2217 = M0.raise_argument_error($rjs_core.Symbol.make("call-with-parameterization"),$rjs_core.UString.make("(-> any)"),1,paramz3458,thunk3459);}if_res2217;var __context2218 = $rjs_core.Marks.getFrames();var __context2219;try {__context2219 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.parameterization_key,paramz3458);var __wcm_result2220 = thunk3459();} finally {$rjs_core.Marks.updateFrame(__context2218,__context2219);}return __wcm_result2220;};var let_result2222 = M0.make_struct_type($rjs_core.Symbol.make("break-parameterization"),false,1,0,false);var struct_break_paramz = let_result2222.getAt(0);var make_break_paramz = let_result2222.getAt(1);var break_paramz_p = let_result2222.getAt(2);var break_paramz_ref = let_result2222.getAt(3);var break_paramz_set_bang_ = let_result2222.getAt(4);var let_result2223 = M0.make_struct_type($rjs_core.Symbol.make("break-parameterization"),false,1,0,false,M0.rnull,M0.current_inspector());var type3460 = let_result2223.getAt(0);var maker3461 = let_result2223.getAt(1);var pred3462 = let_result2223.getAt(2);var access3463 = let_result2223.getAt(3);var mutate3464 = let_result2223.getAt(4);var let_result2224 = M0.values(type3460,maker3461,pred3462,M0.make_struct_field_accessor(access3463,0,$rjs_core.Symbol.make("cell")),M0.make_struct_field_mutator(mutate3464,0,$rjs_core.Symbol.make("cell")));var struct_break_parameterization = let_result2224.getAt(0);var make_break_parameterization = let_result2224.getAt(1);var break_parameterization_p = let_result2224.getAt(2);var break_parameterization_cell = let_result2224.getAt(3);var set_break_parameterization_cell_bang_ = let_result2224.getAt(4);var current_break_parameterization = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return make_break_paramz(M0.continuation_mark_set_first(false,M1.break_enabled_key));};var call_with_break_parameterization = function(paramz3465, thunk3466) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (break_paramz_p(paramz3465)!==false) {var if_res2225 = M0.rvoid();} else {var if_res2225 = M0.raise_argument_error($rjs_core.Symbol.make("call-with-break-parameterization"),$rjs_core.UString.make("break-parameterization?"),0,paramz3465,thunk3466);}if_res2225;if (M0.procedure_p(thunk3466)!==false) {var if_res2226 = M0.procedure_arity_includes_p(thunk3466,0);} else {var if_res2226 = false;}if (if_res2226!==false) {var if_res2227 = M0.rvoid();} else {var if_res2227 = M0.raise_argument_error($rjs_core.Symbol.make("call-with-parameterization"),$rjs_core.UString.make("(-> any)"),1,paramz3465,thunk3466);}if_res2227;var __context2229 = $rjs_core.Marks.getFrames();var __context2230;try {__context2230 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.break_enabled_key,break_paramz_ref(paramz3465,0));M1.check_for_break();var __wcm_result2231 = thunk3466();} finally {$rjs_core.Marks.updateFrame(__context2229,__context2230);}var begin_res2228 = __wcm_result2231;M1.check_for_break();return begin_res2228;};var select_handler_by_no_breaks = function(e3467, bpz3468, l3469) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __context2240 = $rjs_core.Marks.getFrames();var __context2241;try {__context2241 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.break_enabled_key,M0.make_thread_cell(false));var loop3470 = function(l3471) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(l3471)!==false) {var if_res2239 = M0.raise(e3467);} else {if (M0.caar(l3471)(e3467)!==false) {var begin_res2233 = M0.cdar(l3471)(e3467);var __context2234 = $rjs_core.Marks.getFrames();var __context2235;try {__context2235 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.break_enabled_key,bpz3468);var __wcm_result2236 = M1.check_for_break();} finally {$rjs_core.Marks.updateFrame(__context2234,__context2235);}__wcm_result2236;var if_res2238 = begin_res2233;} else {var if_res2238 = loop3470(M0.cdr(l3471));}var if_res2239 = if_res2238;}return if_res2239;};var __wcm_result2242 = loop3470(l3469);} finally {$rjs_core.Marks.updateFrame(__context2240,__context2241);}return __wcm_result2242;};var select_handler_by_breaks_as_is = function(e3472, bpz3473, l3474) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(l3474)!==false) {var if_res2249 = M0.raise(e3472);} else {if (M0.caar(l3474)(e3472)!==false) {var __context2244 = $rjs_core.Marks.getFrames();var __context2245;try {__context2245 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.break_enabled_key,bpz3473);M1.check_for_break();var __wcm_result2246 = M0.cdar(l3474)(e3472);} finally {$rjs_core.Marks.updateFrame(__context2244,__context2245);}var if_res2248 = __wcm_result2246;} else {var if_res2248 = select_handler_by_breaks_as_is(e3472,bpz3473,M0.cdr(l3474));}var if_res2249 = if_res2248;}return if_res2249;};var false_thread_cell = M0.make_thread_cell(false);var check_with_handlers_in_context = function(handler_prompt_key3475) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.__rjs_quoted__.continuation_prompt_available_p(handler_prompt_key3475)!==false) {var if_res2250 = M0.rvoid();} else {var if_res2250 = M0.error($rjs_core.Symbol.make("with-handlers"),$rjs_core.UString.make("exception handler used out of context"));}return if_res2250;};var handler_prompt_key = M0.make_continuation_prompt_tag($rjs_core.Symbol.make("handler-prompt-tag"));var call_handled_body = function(bpz3476, handle_proc3477, body_thunk3478) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __context2259 = $rjs_core.Marks.getFrames();var __context2260;try {__context2260 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.break_enabled_key,false_thread_cell);var __wcm_result2261 = M0.call_with_continuation_prompt(function(bpz3479, body_thunk3480) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __context2255 = $rjs_core.Marks.getFrames();var __context2256;try {__context2256 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.break_enabled_key,bpz3479);var __context2251 = $rjs_core.Marks.getFrames();var __context2252;try {__context2252 = __context2251;$rjs_core.Marks.setMark(M1.exception_handler_key,function(e3481) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.abort_current_continuation(handler_prompt_key,e3481);});var __wcm_result2253 = body_thunk3480();} finally {$rjs_core.Marks.updateFrame(__context2251,__context2252);}var __wcm_result2257 = __wcm_result2253;} finally {$rjs_core.Marks.updateFrame(__context2255,__context2256);}return __wcm_result2257;},handler_prompt_key,handle_proc3477,bpz3476,body_thunk3478);} finally {$rjs_core.Marks.updateFrame(__context2259,__context2260);}return __wcm_result2261;};var call_with_exception_handler = function(exnh3482, thunk3483) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __context2264 = $rjs_core.Marks.getFrames();var __context2265;try {__context2265 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.exception_handler_key,exnh3482);var __wcm_result2266 = thunk3483();} finally {$rjs_core.Marks.updateFrame(__context2264,__context2265);}var begin_res2263 = __wcm_result2266;M0.rvoid();return begin_res2263;};var call_by_cc = M0.__rjs_quoted__.call_with_current_continuation;var not_there = M0.gensym();var do_hash_update = function(who3484, mut_p3485, set3486, ht3487, key3488, xform3489, default3490) {if (arguments.length!==7) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.variable_reference_from_unsafe_p($rjs_core.Symbol.make("#%variable-reference"))!==false) {var if_res2274 = M0.rvoid();} else {if (M0.hash_p(ht3487)!==false) {if (mut_p3485!==false) {var if_res2268 = M0.not(M0.immutable_p(ht3487));} else {var if_res2268 = M0.immutable_p(ht3487);}var if_res2269 = if_res2268;} else {var if_res2269 = false;}if (if_res2269!==false) {var if_res2271 = M0.rvoid();} else {if (mut_p3485!==false) {var if_res2270 = $rjs_core.UString.make("(and/c hash? (not/c immutable?))");} else {var if_res2270 = $rjs_core.UString.make("(and/c hash? immutable?)");}var if_res2271 = M0.raise_argument_error(who3484,if_res2270,ht3487);}if_res2271;if (M0.procedure_p(xform3489)!==false) {var if_res2272 = M0.procedure_arity_includes_p(xform3489,1);} else {var if_res2272 = false;}if (if_res2272!==false) {var if_res2273 = M0.rvoid();} else {var if_res2273 = M0.raise_argument_error(who3484,$rjs_core.UString.make("(any/c . -> . any/c)"),xform3489);}var if_res2274 = if_res2273;}if_res2274;var v3491 = M0.hash_ref(ht3487,key3488,default3490);if (M0.eq_p(v3491,not_there)!==false) {var if_res2275 = M0.raise_mismatch_error(who3484,$rjs_core.UString.make("no value found for key: "),key3488);} else {var if_res2275 = set3486(ht3487,key3488,xform3489(v3491));}return if_res2275;};var cl2276 = function(ht3492, key3493, xform3494, default3495) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return do_hash_update($rjs_core.Symbol.make("hash-update"),false,M0.hash_set,ht3492,key3493,xform3494,default3495);};var cl2277 = function(ht3496, key3497, xform3498) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return hash_update(ht3496,key3497,xform3498,not_there);};var hash_update = $rjs_core.attachProcedureArity(function() {var fixed_lam2278 = {'4':cl2276,'3':cl2277}[arguments.length];if (fixed_lam2278!==undefined) {return fixed_lam2278.apply(null,arguments);} else {return M0.error($rjs_core.UString.make("case-lambda: invalid case"));}},[3,4]);var cl2279 = function(ht3499, key3500, xform3501, default3502) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return do_hash_update($rjs_core.Symbol.make("hash-update!"),true,M0.hash_set_bang_,ht3499,key3500,xform3501,default3502);};var cl2280 = function(ht3503, key3504, xform3505) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return hash_update_bang_(ht3503,key3504,xform3505,not_there);};var hash_update_bang_ = $rjs_core.attachProcedureArity(function() {var fixed_lam2281 = {'4':cl2279,'3':cl2280}[arguments.length];if (fixed_lam2281!==undefined) {return fixed_lam2281.apply(null,arguments);} else {return M0.error($rjs_core.UString.make("case-lambda: invalid case"));}},[3,4]);var hash_has_key_p = function(ht3506, key3507) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.hash_p(ht3506)!==false) {var if_res2282 = M0.rvoid();} else {var if_res2282 = M0.raise_argument_error($rjs_core.Symbol.make("hash-has-key?"),$rjs_core.UString.make("hash?"),0,ht3506,key3507);}if_res2282;return M0.not(M0.eq_p(not_there,M0.hash_ref(ht3506,key3507,not_there)));};var hash_ref_bang_ = function(ht3508, key3509, new3510) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.hash_p(ht3508)!==false) {var if_res2283 = M0.not(M0.immutable_p(ht3508));} else {var if_res2283 = false;}if (if_res2283!==false) {var if_res2284 = M0.rvoid();} else {var if_res2284 = M0.raise_argument_error($rjs_core.Symbol.make("hash-ref!"),$rjs_core.UString.make("(and/c hash? (not/c immutable?))"),0,ht3508,key3509,new3510);}if_res2284;var v3511 = M0.hash_ref(ht3508,key3509,not_there);if (M0.eq_p(not_there,v3511)!==false) {if (M0.procedure_p(new3510)!==false) {var if_res2285 = new3510();} else {var if_res2285 = new3510;}var n3512 = if_res2285;M0.hash_set_bang_(ht3508,key3509,n3512);var if_res2286 = n3512;} else {var if_res2286 = v3511;}return if_res2286;};var __rjs_quoted__ = {};__rjs_quoted__.call_by_cc = call_by_cc;__rjs_quoted__.select_handler_by_no_breaks = select_handler_by_no_breaks;__rjs_quoted__.call_handled_body = call_handled_body;__rjs_quoted__.select_handler_by_breaks_as_is = select_handler_by_breaks_as_is;export { __rjs_quoted__,hash_update_bang_,hash_update,hash_has_key_p,hash_ref_bang_,call_by_cc,call_with_exception_handler,break_paramz_p as break_parameterization_p,call_with_break_parameterization,current_break_parameterization,call_with_parameterization,current_parameterization };