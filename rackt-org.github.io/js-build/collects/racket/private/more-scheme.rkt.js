import * as $rjs_core from '../../../runtime/core.js';import * as M0 from "../../../runtime/kernel.rkt.js";import * as M1 from "../../../runtime/paramz.rkt.js";var current_parameterization = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.continuation_mark_set_first(false,M1.parameterization_key);};var call_with_parameterization = function(paramz3541, thunk3542) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.__rjs_quoted__.parameterization_p(paramz3541)!==false) {var if_res2280 = M0.rvoid();} else {var if_res2280 = M0.raise_argument_error($rjs_core.Symbol.make("call-with-parameterization"),$rjs_core.UString.make("parameterization?"),0,paramz3541,thunk3542);}if_res2280;if (M0.procedure_p(thunk3542)!==false) {var if_res2281 = M0.procedure_arity_includes_p(thunk3542,0);} else {var if_res2281 = false;}if (if_res2281!==false) {var if_res2282 = M0.rvoid();} else {var if_res2282 = M0.raise_argument_error($rjs_core.Symbol.make("call-with-parameterization"),$rjs_core.UString.make("(-> any)"),1,paramz3541,thunk3542);}if_res2282;var __context2283 = $rjs_core.Marks.getFrames();var __context2284;try {__context2284 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.parameterization_key,paramz3541);var __wcm_result2285 = thunk3542();} finally {$rjs_core.Marks.updateFrame(__context2283,__context2284);}return __wcm_result2285;};var let_result2287 = M0.make_struct_type($rjs_core.Symbol.make("break-parameterization"),false,1,0,false);var struct_break_paramz = let_result2287.getAt(0);var make_break_paramz = let_result2287.getAt(1);var break_paramz_p = let_result2287.getAt(2);var break_paramz_ref = let_result2287.getAt(3);var break_paramz_set_bang_ = let_result2287.getAt(4);var let_result2288 = M0.make_struct_type($rjs_core.Symbol.make("break-parameterization"),false,1,0,false,M0.rnull,M0.current_inspector());var type3543 = let_result2288.getAt(0);var maker3544 = let_result2288.getAt(1);var pred3545 = let_result2288.getAt(2);var access3546 = let_result2288.getAt(3);var mutate3547 = let_result2288.getAt(4);var let_result2289 = M0.values(type3543,maker3544,pred3545,M0.make_struct_field_accessor(access3546,0,$rjs_core.Symbol.make("cell")),M0.make_struct_field_mutator(mutate3547,0,$rjs_core.Symbol.make("cell")));var struct_break_parameterization = let_result2289.getAt(0);var make_break_parameterization = let_result2289.getAt(1);var break_parameterization_p = let_result2289.getAt(2);var break_parameterization_cell = let_result2289.getAt(3);var set_break_parameterization_cell_bang_ = let_result2289.getAt(4);var current_break_parameterization = function() {if (arguments.length!==0) {throw $rjs_core.racketContractError("arity mismatch");} else {}return make_break_paramz(M0.continuation_mark_set_first(false,M1.break_enabled_key));};var call_with_break_parameterization = function(paramz3548, thunk3549) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (break_paramz_p(paramz3548)!==false) {var if_res2290 = M0.rvoid();} else {var if_res2290 = M0.raise_argument_error($rjs_core.Symbol.make("call-with-break-parameterization"),$rjs_core.UString.make("break-parameterization?"),0,paramz3548,thunk3549);}if_res2290;if (M0.procedure_p(thunk3549)!==false) {var if_res2291 = M0.procedure_arity_includes_p(thunk3549,0);} else {var if_res2291 = false;}if (if_res2291!==false) {var if_res2292 = M0.rvoid();} else {var if_res2292 = M0.raise_argument_error($rjs_core.Symbol.make("call-with-parameterization"),$rjs_core.UString.make("(-> any)"),1,paramz3548,thunk3549);}if_res2292;var __context2294 = $rjs_core.Marks.getFrames();var __context2295;try {__context2295 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.break_enabled_key,break_paramz_ref(paramz3548,0));M1.check_for_break();var __wcm_result2296 = thunk3549();} finally {$rjs_core.Marks.updateFrame(__context2294,__context2295);}var begin_res2293 = __wcm_result2296;M1.check_for_break();return begin_res2293;};var select_handler_by_no_breaks = function(e3550, bpz3551, l3552) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __context2305 = $rjs_core.Marks.getFrames();var __context2306;try {__context2306 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.break_enabled_key,M0.make_thread_cell(false));var loop3553 = function(l3554) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(l3554)!==false) {var if_res2304 = M0.raise(e3550);} else {if (M0.caar(l3554)(e3550)!==false) {var begin_res2298 = M0.cdar(l3554)(e3550);var __context2299 = $rjs_core.Marks.getFrames();var __context2300;try {__context2300 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.break_enabled_key,bpz3551);var __wcm_result2301 = M1.check_for_break();} finally {$rjs_core.Marks.updateFrame(__context2299,__context2300);}__wcm_result2301;var if_res2303 = begin_res2298;} else {var if_res2303 = loop3553(M0.cdr(l3554));}var if_res2304 = if_res2303;}return if_res2304;};var __wcm_result2307 = loop3553(l3552);} finally {$rjs_core.Marks.updateFrame(__context2305,__context2306);}return __wcm_result2307;};var select_handler_by_breaks_as_is = function(e3555, bpz3556, l3557) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.null_p(l3557)!==false) {var if_res2314 = M0.raise(e3555);} else {if (M0.caar(l3557)(e3555)!==false) {var __context2309 = $rjs_core.Marks.getFrames();var __context2310;try {__context2310 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.break_enabled_key,bpz3556);M1.check_for_break();var __wcm_result2311 = M0.cdar(l3557)(e3555);} finally {$rjs_core.Marks.updateFrame(__context2309,__context2310);}var if_res2313 = __wcm_result2311;} else {var if_res2313 = select_handler_by_breaks_as_is(e3555,bpz3556,M0.cdr(l3557));}var if_res2314 = if_res2313;}return if_res2314;};var false_thread_cell = M0.make_thread_cell(false);var check_with_handlers_in_context = function(handler_prompt_key3558) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.__rjs_quoted__.continuation_prompt_available_p(handler_prompt_key3558)!==false) {var if_res2315 = M0.rvoid();} else {var if_res2315 = M0.error($rjs_core.Symbol.make("with-handlers"),$rjs_core.UString.make("exception handler used out of context"));}return if_res2315;};var handler_prompt_key = M0.make_continuation_prompt_tag($rjs_core.Symbol.make("handler-prompt-tag"));var call_handled_body = function(bpz3559, handle_proc3560, body_thunk3561) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __context2324 = $rjs_core.Marks.getFrames();var __context2325;try {__context2325 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.break_enabled_key,false_thread_cell);var __wcm_result2326 = M0.call_with_continuation_prompt(function(bpz3562, body_thunk3563) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __context2320 = $rjs_core.Marks.getFrames();var __context2321;try {__context2321 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.break_enabled_key,bpz3562);var __context2316 = $rjs_core.Marks.getFrames();var __context2317;try {__context2317 = __context2316;$rjs_core.Marks.setMark(M1.exception_handler_key,function(e3564) {if (arguments.length!==1) {throw $rjs_core.racketContractError("arity mismatch");} else {}return M0.abort_current_continuation(handler_prompt_key,e3564);});var __wcm_result2318 = body_thunk3563();} finally {$rjs_core.Marks.updateFrame(__context2316,__context2317);}var __wcm_result2322 = __wcm_result2318;} finally {$rjs_core.Marks.updateFrame(__context2320,__context2321);}return __wcm_result2322;},handler_prompt_key,handle_proc3560,bpz3559,body_thunk3561);} finally {$rjs_core.Marks.updateFrame(__context2324,__context2325);}return __wcm_result2326;};var call_with_exception_handler = function(exnh3565, thunk3566) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}var __context2329 = $rjs_core.Marks.getFrames();var __context2330;try {__context2330 = $rjs_core.Marks.enterFrame();$rjs_core.Marks.setMark(M1.exception_handler_key,exnh3565);var __wcm_result2331 = thunk3566();} finally {$rjs_core.Marks.updateFrame(__context2329,__context2330);}var begin_res2328 = __wcm_result2331;M0.rvoid();return begin_res2328;};var call_by_cc = M0.__rjs_quoted__.call_with_current_continuation;var not_there = M0.gensym();var do_hash_update = function(who3567, mut_p3568, set3569, ht3570, key3571, xform3572, default3573) {if (arguments.length!==7) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.variable_reference_from_unsafe_p($rjs_core.Symbol.make("#%variable-reference"))!==false) {var if_res2339 = M0.rvoid();} else {if (M0.hash_p(ht3570)!==false) {if (mut_p3568!==false) {var if_res2333 = M0.not(M0.immutable_p(ht3570));} else {var if_res2333 = M0.immutable_p(ht3570);}var if_res2334 = if_res2333;} else {var if_res2334 = false;}if (if_res2334!==false) {var if_res2336 = M0.rvoid();} else {if (mut_p3568!==false) {var if_res2335 = $rjs_core.UString.make("(and/c hash? (not/c immutable?))");} else {var if_res2335 = $rjs_core.UString.make("(and/c hash? immutable?)");}var if_res2336 = M0.raise_argument_error(who3567,if_res2335,ht3570);}if_res2336;if (M0.procedure_p(xform3572)!==false) {var if_res2337 = M0.procedure_arity_includes_p(xform3572,1);} else {var if_res2337 = false;}if (if_res2337!==false) {var if_res2338 = M0.rvoid();} else {var if_res2338 = M0.raise_argument_error(who3567,$rjs_core.UString.make("(any/c . -> . any/c)"),xform3572);}var if_res2339 = if_res2338;}if_res2339;var v3574 = M0.hash_ref(ht3570,key3571,default3573);if (M0.eq_p(v3574,not_there)!==false) {var if_res2340 = M0.raise_mismatch_error(who3567,$rjs_core.UString.make("no value found for key: "),key3571);} else {var if_res2340 = set3569(ht3570,key3571,xform3572(v3574));}return if_res2340;};var cl2341 = function(ht3575, key3576, xform3577, default3578) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return do_hash_update($rjs_core.Symbol.make("hash-update"),false,M0.hash_set,ht3575,key3576,xform3577,default3578);};var cl2342 = function(ht3579, key3580, xform3581) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return hash_update(ht3579,key3580,xform3581,not_there);};var hash_update = $rjs_core.attachProcedureArity(function() {var fixed_lam2343 = {'4':cl2341,'3':cl2342}[arguments.length];if (fixed_lam2343!==undefined) {return fixed_lam2343.apply(null,arguments);} else {return M0.error($rjs_core.UString.make("case-lambda: invalid case"));}},[3,4]);var cl2344 = function(ht3582, key3583, xform3584, default3585) {if (arguments.length!==4) {throw $rjs_core.racketContractError("arity mismatch");} else {}return do_hash_update($rjs_core.Symbol.make("hash-update!"),true,M0.hash_set_bang_,ht3582,key3583,xform3584,default3585);};var cl2345 = function(ht3586, key3587, xform3588) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}return hash_update_bang_(ht3586,key3587,xform3588,not_there);};var hash_update_bang_ = $rjs_core.attachProcedureArity(function() {var fixed_lam2346 = {'4':cl2344,'3':cl2345}[arguments.length];if (fixed_lam2346!==undefined) {return fixed_lam2346.apply(null,arguments);} else {return M0.error($rjs_core.UString.make("case-lambda: invalid case"));}},[3,4]);var hash_has_key_p = function(ht3589, key3590) {if (arguments.length!==2) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.hash_p(ht3589)!==false) {var if_res2347 = M0.rvoid();} else {var if_res2347 = M0.raise_argument_error($rjs_core.Symbol.make("hash-has-key?"),$rjs_core.UString.make("hash?"),0,ht3589,key3590);}if_res2347;return M0.not(M0.eq_p(not_there,M0.hash_ref(ht3589,key3590,not_there)));};var hash_ref_bang_ = function(ht3591, key3592, new3593) {if (arguments.length!==3) {throw $rjs_core.racketContractError("arity mismatch");} else {}if (M0.hash_p(ht3591)!==false) {var if_res2348 = M0.not(M0.immutable_p(ht3591));} else {var if_res2348 = false;}if (if_res2348!==false) {var if_res2349 = M0.rvoid();} else {var if_res2349 = M0.raise_argument_error($rjs_core.Symbol.make("hash-ref!"),$rjs_core.UString.make("(and/c hash? (not/c immutable?))"),0,ht3591,key3592,new3593);}if_res2349;var v3594 = M0.hash_ref(ht3591,key3592,not_there);if (M0.eq_p(not_there,v3594)!==false) {if (M0.procedure_p(new3593)!==false) {var if_res2350 = new3593();} else {var if_res2350 = new3593;}var n3595 = if_res2350;M0.hash_set_bang_(ht3591,key3592,n3595);var if_res2351 = n3595;} else {var if_res2351 = v3594;}return if_res2351;};var __rjs_quoted__ = {};__rjs_quoted__.call_by_cc = call_by_cc;__rjs_quoted__.select_handler_by_no_breaks = select_handler_by_no_breaks;__rjs_quoted__.call_handled_body = call_handled_body;__rjs_quoted__.select_handler_by_breaks_as_is = select_handler_by_breaks_as_is;export { __rjs_quoted__,hash_update_bang_,hash_update,hash_has_key_p,hash_ref_bang_,call_by_cc,call_with_exception_handler,break_paramz_p as break_parameterization_p,call_with_break_parameterization,current_break_parameterization,call_with_parameterization,current_parameterization };